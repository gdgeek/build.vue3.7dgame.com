import{d as a,r as t,X as e,o as s,ab as r,e as n,h as i,l as o,w as l,B as u,bq as c,g as p,f as d,a1 as m,aA as f,a0 as g,b8 as j,br as x,aZ as y,bs as _,bt as h}from"./index.Cjef_Z7z.js";import{E as v}from"./el-pagination.IwLhpCYo.js";/* empty css               */import"./el-select.BFERwip5.js";import"./el-popper.D6CqizVa.js";/* empty css                        */import{s as w,t as b,u as z}from"./index.BecrVcGQ.js";import{M as k}from"./index.DpST0UY_.js";import{M as B,W as M}from"./index.Dne7kV11.js";/* empty css                       *//* empty css                 *//* empty css                   */import{E as T}from"./index.CGmOhrBq.js";import"./isEqual.BYfoMfE6.js";import"./_Uint8Array.ClFFuwof.js";import"./index.BXnlD_Jm.js";import"./event.CIKxL71l.js";import"./index.uO1bW3rE.js";import"./strings.C83A8Pxk.js";import"./castArray.rYmLHGWs.js";import"./index.nlXv4Th5.js";import"./v4.aGgpFg1T.js";import"./index.CPFVFN5s.js";import"./aria.D6AGjDMk.js";const C={class:"project-index"},I=u("br",null,null,-1),A=u("span",{class:"hidden-sm-and-down"},"上传视频",-1),E=u("br",null,null,-1),O=a({__name:"index",setup(a){const u=t([]),O=t("-created_at"),S=t(""),q=e({current:1,count:1,size:20,total:20}),U=async a=>{q.current=a,await N()},W=async a=>{try{const{value:t}=await T.prompt("请输入新名称","修改视频名称",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValue:a.name});await F(a.id,t),f.success("新的视频名称: "+t)}catch{f.info("取消输入")}},Z=a=>{O.value=a,N()},D=a=>{S.value=a,N()},F=async(a,t)=>{try{await b(a,{name:t}),N()}catch(e){}},K=async a=>{try{await T.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),await L(a.id),f.success("删除成功!")}catch{f.info("已取消删除")}},L=async a=>{try{await z(a),N()}catch(t){}},N=async()=>{try{const a=await w(O.value,S.value,q.current);q.current=parseInt(a.headers["x-pagination-current-page"]),q.count=parseInt(a.headers["x-pagination-page-count"]),q.size=parseInt(a.headers["x-pagination-per-page"]),q.total=parseInt(a.headers["x-pagination-total-count"]),a.data&&(u.value=a.data)}catch(a){}};return s((()=>N())),(a,t)=>{const e=g,s=r("router-link"),f=j,w=x,b=y,z=_,T=v,F=h,L=c;return n(),i("div",C,[I,o(L,null,{default:l((()=>[o(w,null,{default:l((()=>[o(B,{sorted:p(O),searched:p(S),onSearch:D,onSort:Z},{default:l((()=>[o(f,{inline:!0},{default:l((()=>[o(s,{to:"/resource/video/upload"},{default:l((()=>[o(e,{size:"small",type:"primary",icon:"uploadFilled"},{default:l((()=>[A])),_:1})])),_:1})])),_:1})])),_:1},8,["sorted","searched"])])),_:1}),o(z,null,{default:l((()=>[o(b,null,{default:l((()=>[o(p(M),{list:p(u),width:320,gutter:10},{item:l((({item:a})=>[o(k,{item:a,onNamed:W,onDeleted:K},{enter:l((()=>[o(s,{to:`/resource/video/view?id=${a.id}`},{default:l((()=>[null===a.info||null===a.image?(n(),d(e,{key:0,type:"warning",size:"small"},{default:l((()=>[m(" 初始化视频数据 ")])),_:1})):(n(),d(e,{key:1,type:"primary",size:"small"},{default:l((()=>[m("查看视频")])),_:1}))])),_:2},1032,["to"])])),_:2},1032,["item"])])),_:1},8,["list"])])),_:1})])),_:1}),o(F,null,{default:l((()=>[o(b,{class:"box-card"},{default:l((()=>[o(T,{"current-page":p(q).current,"page-count":p(q).count,"page-size":p(q).size,total:p(q).total,layout:"prev, pager, next, jumper",background:"",onCurrentChange:U},null,8,["current-page","page-count","page-size","total"])])),_:1})])),_:1})])),_:1}),E])}}});export{O as default};
