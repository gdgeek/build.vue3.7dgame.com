import{d as a,aD as e,aF as s,r as l,c as t,aG as r,ab as o,e as i,h as n,B as u,l as d,w as c,g as m,D as p,p as f,a1 as g,a0 as v,E as h,a$ as b,aP as _,aQ as y,b0 as w,aA as j,b1 as x,Y as k,aw as U}from"./index.Cjef_Z7z.js";import{E as q,a as I}from"./el-form.D3OlyBar.js";import"./el-form-item.l0sNRNKZ.js";/* empty css                 *//* empty css             */import{E as V}from"./index.BXnlD_Jm.js";import"./castArray.rYmLHGWs.js";import"./event.CIKxL71l.js";import"./_Uint8Array.ClFFuwof.js";import"./_initCloneObject.BBOceheS.js";const A=a=>(_("data-v-510a15b2"),a=a(),y(),a),P={class:"header"},R=A((()=>u("img",{src:"/favicon.ico",alt:""},null,-1))),E=A((()=>u("span",{class:"project_title"},"苹果AR元气项目",-1))),C={class:"header-right"},F=A((()=>u("div",{class:"blog"},[u("a",null,"开发博客")],-1))),S={class:"content"},$={class:"box1"},B={class:"box2"},D=A((()=>u("h1",null,"欢迎!",-1))),G=A((()=>u("h4",null,"准备好出发了么？",-1))),L={class:"box3"},O=A((()=>u("h2",{class:"login-title"},"登录账号",-1))),z={key:0,class:"error-message"},H={class:"footer"},M={class:"copyright"},Q={href:"https://beian.miit.gov.cn/",target:"_blank",underline:!1},W={href:"#"},Y=U(a({__name:"index",setup(a){const _=e(),y=s(),U=l({username:"huyuelong",password:"123456hu"}),A=t((()=>({username:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:5,message:"用户名称长度应该大于5",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度应该大于6",trigger:"blur"}]}))),Y=r(),J=l(),K=l(!1),N=l(""),T=a=>{localStorage.setItem(x,"Bearer "+a)};const X=a=>{aa(a)},Z=()=>{var a;null==(a=J.value)||a.validate((async a=>{if(a)try{const a=await w.login(U.value);await(a=>{j.success("登录成功");const e=a.access_token;e?(T(e),localStorage.getItem(x),k((()=>{Y.push("/")}))):X("登录响应中缺少 access_token")})(a.data);await _.getUserInfo();const{path:e,queryParams:s}=await function(){const a=y.query.redirect??"/",e=new URL(a,window.location.origin),s=e.pathname,l={};return e.searchParams.forEach(((a,e)=>{l[e]=a})),{path:s,queryParams:l}}();await Y.push({path:e,query:s})}catch(e){X(e)}else j({type:"error",message:"表单校验未通过"})}))},aa=a=>{N.value="string"==typeof a?a:Object.keys(a).map((e=>`${e} : ${a[e]}`)).join("\n"),K.value=!0};return(a,e)=>{const s=v,l=V,t=I,r=q,_=o("HomeFilled"),y=h,w=o("Grid"),j=o("InfoFilled");return i(),n("body",null,[u("div",P,[d(m(b),{to:"/",class:"logo"},{default:c((()=>[R,E])),_:1}),u("div",C,[d(s,null,{default:c((()=>[g("平台注册/登录")])),_:1})]),F]),u("div",S,[u("div",$,[u("div",B,[D,G,u("div",L,[O,d(r,{ref_key:"formRef",ref:J,class:"login-form",rules:A.value,model:U.value,"label-width":"75px"},{default:c((()=>[d(t,{label:"用户名",prop:"username"},{default:c((()=>[d(l,{modelValue:U.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>U.value.username=a),"suffix-icon":"User"},null,8,["modelValue"])])),_:1}),d(t,{label:"密码",prop:"password"},{default:c((()=>[d(l,{modelValue:U.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>U.value.password=a),type:"password","suffix-icon":"Lock"},null,8,["modelValue"])])),_:1}),d(t,{class:"login-button"},{default:c((()=>[d(s,{style:{width:"100%"},type:"primary",onClick:Z},{default:c((()=>[g(" 登录平台 ")])),_:1})])),_:1})])),_:1},8,["rules","model"]),K.value?(i(),n("div",z,p(N.value),1)):f("",!0)]),d(s,{style:{width:"100%"},size:"small"},{default:c((()=>[g(" 下载相关程序 ")])),_:1})])])]),u("div",H,[u("div",M,[d(m(b),{to:"https://bujiaban.com",target:"_blank",underline:!1},{default:c((()=>[d(y,null,{default:c((()=>[d(_)])),_:1}),g(" 上海不加班网络有限公司(Apple Reality Spirit) | ")])),_:1}),u("a",Q,[d(y,null,{default:c((()=>[d(w)])),_:1}),g(" 沪ICP备15039333号 | ")]),u("a",W,[d(y,null,{default:c((()=>[d(j)])),_:1}),g(" 202408 ")])])])])}}}),[["__scopeId","data-v-510a15b2"]]);export{Y as default};
