import{d as a,r as t,aG as e,o as s,ab as n,e as r,h as i,l as o,w as l,B as u,bq as c,g as p,f as d,a1 as m,aA as j,a0 as f,b8 as g,br as x,aZ as y,bs as _,bt as v}from"./index.Cjef_Z7z.js";import{E as h}from"./el-pagination.IwLhpCYo.js";/* empty css               */import"./el-select.BFERwip5.js";import"./el-popper.D6CqizVa.js";/* empty css                        *//* empty css              */import{l as w,m as b,n as z}from"./index.BecrVcGQ.js";import{M as k}from"./index.DpST0UY_.js";import{M as B,W as M}from"./index.Dne7kV11.js";/* empty css                       *//* empty css                 *//* empty css                   */import{E as T}from"./index.CGmOhrBq.js";import"./isEqual.BYfoMfE6.js";import"./_Uint8Array.ClFFuwof.js";import"./index.BXnlD_Jm.js";import"./event.CIKxL71l.js";import"./index.uO1bW3rE.js";import"./strings.C83A8Pxk.js";import"./castArray.rYmLHGWs.js";import"./index.nlXv4Th5.js";import"./v4.aGgpFg1T.js";import"./index.CPFVFN5s.js";import"./aria.D6AGjDMk.js";const C={class:"project-index"},I=u("br",null,null,-1),q=u("span",{class:"hidden-sm-and-down"},"上传图片",-1),A=u("br",null,null,-1),E=a({__name:"index",setup(a){const u=t([]),E=t("-created_at"),O=t(""),S=t({current:1,count:1,size:20,total:20});e();const U=a=>{S.value.current=a,L()},W=async a=>{try{const{value:t}=await T.prompt("请输入新名称","修改图片名称",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValue:a.name});await F(a.id,t),j.success("新的模型名称: "+t)}catch{j.info("取消输入")}},Z=a=>{E.value=a,L()},D=a=>{O.value=a,L()},F=async(a,t)=>{try{await b(a,{name:t}),L()}catch(e){}},G=async a=>{try{await T.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}),await K(a.id),j.success("删除成功!")}catch{j.info("已取消删除")}},K=async a=>{try{await z(a),L()}catch(t){}},L=async()=>{try{const a=await w(E.value,O.value,S.value.current),t=a.headers;S.value={current:parseInt(t["x-pagination-current-page"]),count:parseInt(t["x-pagination-page-count"]),size:parseInt(t["x-pagination-per-page"]),total:parseInt(t["x-pagination-total-count"])},a.data&&(u.value=a.data)}catch(a){}};return s((()=>L())),(a,t)=>{const e=f,s=n("router-link"),j=g,w=x,b=y,z=_,T=h,F=v,K=c;return r(),i("div",C,[I,o(K,null,{default:l((()=>[o(w,null,{default:l((()=>[o(B,{sorted:p(E),searched:p(O),onSearch:D,onSort:Z},{default:l((()=>[o(j,{inline:!0},{default:l((()=>[o(s,{to:"/resource/picture/upload"},{default:l((()=>[o(e,{size:"small",type:"primary",icon:"uploadFilled"},{default:l((()=>[q])),_:1})])),_:1})])),_:1})])),_:1},8,["sorted","searched"])])),_:1}),o(z,null,{default:l((()=>[o(b,null,{default:l((()=>[o(p(M),{list:p(u),width:320,gutter:10},{item:l((({item:a})=>[o(k,{item:a,onNamed:W,onDeleted:G},{enter:l((()=>[o(s,{to:`/resource/picture/view?id=${a.id}`},{default:l((()=>[null===a.info||null===a.image?(r(),d(e,{key:0,type:"warning",size:"small"},{default:l((()=>[m(" 初始化图片数据 ")])),_:1})):(r(),d(e,{key:1,type:"primary",size:"small"},{default:l((()=>[m(" 查看图片 ")])),_:1}))])),_:2},1032,["to"])])),_:2},1032,["item"])])),_:1},8,["list"])])),_:1})])),_:1}),o(F,null,{default:l((()=>[o(b,{class:"box-card"},{default:l((()=>[o(T,{"current-page":p(S).current,"page-count":p(S).count,"page-size":p(S).size,total:p(S).total,layout:"prev, pager, next, jumper",background:"",onCurrentChange:U},null,8,["current-page","page-count","page-size","total"])])),_:1})])),_:1})])),_:1}),A])}}});export{E as default};
